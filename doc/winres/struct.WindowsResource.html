<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="rustdoc">
    <meta name="description" content="API documentation for the Rust `WindowsResource` struct in crate `winres`.">
    <meta name="keywords" content="rust, rustlang, rust-lang, WindowsResource">

    <title>winres::WindowsResource - Rust</title>

    <link rel="stylesheet" type="text/css" href="../rustdoc.css">
    <link rel="stylesheet" type="text/css" href="../main.css">
    

    
    
</head>
<body class="rustdoc">
    <!--[if lte IE 8]>
    <div class="warning">
        This old browser is unsupported and will most likely display funky
        things.
    </div>
    <![endif]-->

    

    <nav class="sidebar">
        
        <p class='location'><a href='index.html'>winres</a></p><script>window.sidebarCurrent = {name: 'WindowsResource', ty: 'struct', relpath: ''};</script><script defer src="sidebar-items.js"></script>
    </nav>

    <nav class="sub">
        <form class="search-form js-only">
            <div class="search-container">
                <input class="search-input" name="search"
                       autocomplete="off"
                       placeholder="Click or press ‘S’ to search, ‘?’ for more options…"
                       type="search">
            </div>
        </form>
    </nav>

    <section id='main' class="content struct">
<h1 class='fqn'><span class='in-band'>Struct <a href='index.html'>winres</a>::<wbr><a class='struct' href=''>WindowsResource</a></span><span class='out-of-band'><span id='render-detail'>
                   <a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">
                       [<span class='inner'>&#x2212;</span>]
                   </a>
               </span><a id='src-50' class='srclink' href='../src/winres/lib.rs.html#92-102' title='goto source code'>[src]</a></span></h1>
<pre class='rust struct'>pub struct WindowsResource {
    // some fields omitted
}</pre><h2 id='methods'>Methods</h2><h3 class='impl'><span class='in-band'><code>impl <a class='struct' href='../winres/struct.WindowsResource.html' title='winres::WindowsResource'>WindowsResource</a></code></span><span class='out-of-band'><div class='ghost'></div><a id='src-60' class='srclink' href='../src/winres/lib.rs.html#104-477' title='goto source code'>[src]</a></span></h3>
<div class='impl-items'><h4 id='method.toolkit' class='method'><code>fn <a href='#method.toolkit' class='fnname'>toolkit</a>() -&gt; <a class='enum' href='../winres/enum.Toolkit.html' title='winres::Toolkit'>Toolkit</a></code></h4>
<h4 id='method.new' class='method'><code>fn <a href='#method.new' class='fnname'>new</a>() -&gt; Self</code></h4>
<div class='docblock'><p>Create a new resource with version info struct</p>

<p>We initialize the resource file with values provided by cargo</p>

<table>
<thead>
<tr>
<th>Field</th>
<th>Cargo / Values</th>
</tr>
</thead>

<tbody>
<tr>
<td><code>&quot;FileVersion&quot;</code></td>
<td><code>package.version</code></td>
</tr>
<tr>
<td><code>&quot;ProductVersion&quot;</code></td>
<td><code>package.version</code></td>
</tr>
<tr>
<td><code>&quot;ProductName&quot;</code></td>
<td><code>package.name</code></td>
</tr>
<tr>
<td><code>&quot;FileDescription&quot;</code></td>
<td><code>package.description</code></td>
</tr>
</tbody>
</table>

<p>Furthermore if a section <code>package.metadata.winres</code> exists
in Cargo.toml it will be parsed. Values in this section take precedence
over the values provided natively by cargo. Only the string table
of the version struct can be set this way.</p>

<pre><code class="language-,toml">[package.metadata.winres]
OriginalFilename = &quot;testing.exe&quot;
FileDescription = &quot;⛄❤☕&quot;
LegalCopyright = &quot;Copyright © 2016&quot;
</code></pre>

<p>The version info struct is set to some values
sensible for creating an executable file.</p>

<table>
<thead>
<tr>
<th>Property</th>
<th>Cargo / Values</th>
</tr>
</thead>

<tbody>
<tr>
<td><code>FILEVERSION</code></td>
<td><code>package.version</code></td>
</tr>
<tr>
<td><code>PRODUCTVERSION</code></td>
<td><code>package.version</code></td>
</tr>
<tr>
<td><code>FILEOS</code></td>
<td><code>VOS_NT_WINDOWS32 (0x40004)</code></td>
</tr>
<tr>
<td><code>FILETYPE</code></td>
<td><code>VFT_APP (0x1)</code></td>
</tr>
<tr>
<td><code>FILESUBTYPE</code></td>
<td><code>VFT2_UNKNOWN (0x0)</code></td>
</tr>
<tr>
<td><code>FILEFLAGSMASK</code></td>
<td><code>VS_FFI_FILEFLAGSMASK (0x3F)</code></td>
</tr>
<tr>
<td><code>FILEFLAGS</code></td>
<td><code>0x0</code></td>
</tr>
</tbody>
</table>

<p>Additionally, the language field is set to neutral (0),
and no icon is set.</p>
</div><h4 id='method.set' class='method'><code>fn <a href='#method.set' class='fnname'>set</a>&lt;'a&gt;(&amp;mut self, name: &amp;'a <a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.str.html'>str</a>, value: &amp;'a <a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.str.html'>str</a>) -&gt; &amp;mut Self</code></h4>
<div class='docblock'><p>Set string properties of the version info struct.</p>

<p>Possible field names are:</p>

<ul>
<li><code>&quot;FileVersion&quot;</code></li>
<li><code>&quot;FileDescription&quot;</code></li>
<li><code>&quot;ProductVersion&quot;</code></li>
<li><code>&quot;ProductName&quot;</code></li>
<li><code>&quot;OriginalFilename&quot;</code></li>
<li><code>&quot;LegalCopyright&quot;</code></li>
<li><code>&quot;LegalTrademark&quot;</code></li>
<li><code>&quot;CompanyName&quot;</code></li>
<li><code>&quot;Comments&quot;</code></li>
<li><code>&quot;InternalName&quot;</code></li>
</ul>

<p>Additionally there exists
<code>&quot;PrivateBuild&quot;</code>, <code>&quot;SpecialBuild&quot;</code>
which should only be set, when the <code>FILEFLAGS</code> property is set to
<code>VS_FF_PRIVATEBUILD(0x08)</code> or <code>VS_FF_SPECIALBUILD(0x20)</code></p>

<p>It is possible to use arbirtrary field names, but Windows Explorer and other
tools might not show them.</p>
</div><h4 id='method.set_toolkit_path' class='method'><code>fn <a href='#method.set_toolkit_path' class='fnname'>set_toolkit_path</a>&lt;'a&gt;(&amp;mut self, path: &amp;'a <a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.str.html'>str</a>) -&gt; &amp;mut Self</code></h4>
<div class='docblock'><p>Set the correct path for the toolkit.</p>

<p>For the GNU toolkit this has to be the path where MinGW
put <code>windres.exe</code> and <code>ar.exe</code>. This could be something like:
<code>&quot;C:\Program Files\mingw-w64\x86_64-5.3.0-win32-seh-rt_v4-rev0\mingw64\bin&quot;</code></p>

<p>For MSVC the Windows SDK has to be installed. It comes with the resource compiler
<code>rc.exe</code>. This should be set to the root directory of the Windows SDK, e.g.,
<code>&quot;C:\Program Files (x86)\Windows Kits\10</code></p>
</div><h4 id='method.set_language' class='method'><code>fn <a href='#method.set_language' class='fnname'>set_language</a>(&amp;mut self, language: <a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.u16.html'>u16</a>) -&gt; &amp;mut Self</code></h4>
<div class='docblock'><p>Set the user interface language of the file</p>

<p>For possible values take a look at the MSDN page for resource files,
we only included some values here.</p>

<table>
<thead>
<tr>
<th>Language</th>
<th>Value</th>
</tr>
</thead>

<tbody>
<tr>
<td>Neutral</td>
<td><code>0x0000</code></td>
</tr>
<tr>
<td>English</td>
<td><code>0x0009</code></td>
</tr>
<tr>
<td>English (US)</td>
<td><code>0x0409</code></td>
</tr>
<tr>
<td>English (GB)</td>
<td><code>0x0809</code></td>
</tr>
<tr>
<td>German</td>
<td><code>0x0407</code></td>
</tr>
<tr>
<td>German (AT)</td>
<td><code>0x0c07</code></td>
</tr>
<tr>
<td>French</td>
<td><code>0x000c</code></td>
</tr>
<tr>
<td>French (FR)</td>
<td><code>0x040c</code></td>
</tr>
<tr>
<td>Catalan</td>
<td><code>0x0003</code></td>
</tr>
<tr>
<td>Basque</td>
<td><code>0x042d</code></td>
</tr>
<tr>
<td>Breton</td>
<td><code>0x007e</code></td>
</tr>
<tr>
<td>Scottish Gaelic</td>
<td><code>0x0091</code></td>
</tr>
<tr>
<td>Romansch</td>
<td><code>0x0017</code></td>
</tr>
</tbody>
</table>

<p>I know that some of these languages are used less often, but
they were not included in many other lists.</p>
</div><h4 id='method.set_icon' class='method'><code>fn <a href='#method.set_icon' class='fnname'>set_icon</a>&lt;'a&gt;(&amp;mut self, path: &amp;'a <a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.str.html'>str</a>) -&gt; &amp;mut Self</code></h4>
<div class='docblock'><p>Set an icon filename</p>

<p>This icon need to be in <code>ico</code> format. The filename can be absolute
or relative to the projects root.</p>
</div><h4 id='method.set_version_info' class='method'><code>fn <a href='#method.set_version_info' class='fnname'>set_version_info</a>(&amp;mut self, field: <a class='enum' href='../winres/enum.VersionInfo.html' title='winres::VersionInfo'>VersionInfo</a>, value: <a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.u64.html'>u64</a>) -&gt; &amp;mut Self</code></h4>
<div class='docblock'><p>Set a version info struct property
Currently we only support numeric values, you have to look them up.</p>
</div><h4 id='method.set_manifest' class='method'><code>fn <a href='#method.set_manifest' class='fnname'>set_manifest</a>&lt;'a&gt;(&amp;mut self, manifest: &amp;'a <a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.str.html'>str</a>) -&gt; &amp;mut Self</code></h4>
<div class='docblock'><p>Set the embedded manifest file</p>

<h1 id='example' class='section-header'><a href='#example'>Example</a></h1>
<p>The following manifest will brand the exe as requesting administrator privileges.
Thus every time it is executed, a Windows UAC dialog will apear.</p>

<pre class='rust rust-example-rendered'>
<span class='kw'>let</span> <span class='kw-2'>mut</span> <span class='ident'>res</span> <span class='op'>=</span> <span class='ident'>winres</span>::<span class='ident'>WindowsResource</span>::<span class='ident'>new</span>();
<span class='ident'>res</span>.<span class='ident'>set_manifest</span>(<span class='string'>&quot;
&lt;assembly xmlns=\&quot;urn:schemas-microsoft-com:asm.v1\&quot; manifestVersion=\&quot;1.0\&quot;&gt;
&lt;trustInfo xmlns=\&quot;urn:schemas-microsoft-com:asm.v3\&quot;&gt;
    &lt;security&gt;
        &lt;requestedPrivileges&gt;
            &lt;requestedExecutionLevel level=\&quot;requireAdministrator\&quot; uiAccess=\&quot;false\&quot; /&gt;
        &lt;/requestedPrivileges&gt;
    &lt;/security&gt;
&lt;/trustInfo&gt;
&lt;/assembly&gt;&quot;</span>);</pre>
</div><h4 id='method.set_manifest_file' class='method'><code>fn <a href='#method.set_manifest_file' class='fnname'>set_manifest_file</a>&lt;'a&gt;(&amp;mut self, file: &amp;'a <a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.str.html'>str</a>) -&gt; &amp;mut Self</code></h4>
<div class='docblock'><p>Some as <a href="#method.set_manifest"><code>set_manifest()</code></a> but a filename can be provided and
file is included by the resource compieler itself.
This method works the same way as <a href="#method.set_icon"><code>set_icon()</code></a></p>
</div><h4 id='method.write_resource_file' class='method'><code>fn <a href='#method.write_resource_file' class='fnname'>write_resource_file</a>&lt;P: <a class='trait' href='https://doc.rust-lang.org/nightly/core/convert/trait.AsRef.html' title='core::convert::AsRef'>AsRef</a>&lt;<a class='struct' href='https://doc.rust-lang.org/nightly/std/path/struct.Path.html' title='std::path::Path'>Path</a>&gt;&gt;(&amp;self, path: P) -&gt; <a class='type' href='https://doc.rust-lang.org/nightly/std/io/error/type.Result.html' title='std::io::error::Result'>Result</a>&lt;<a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.tuple.html'>()</a>&gt;</code></h4>
<div class='docblock'><p>Write a resource file with the set values</p>
</div><h4 id='method.set_resource_file' class='method'><code>fn <a href='#method.set_resource_file' class='fnname'>set_resource_file</a>&lt;'a&gt;(&amp;mut self, path: &amp;'a <a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.str.html'>str</a>) -&gt; &amp;mut Self</code></h4>
<div class='docblock'><p>Set a path to an already existing resource file.</p>

<p>We will neither modify this file nor parse its contents. This function
simply replaces the internaly generated resource file that is passed to
the compiler. You can use this function to write a resource file yourself.</p>
</div><h4 id='method.set_output_directory' class='method'><code>fn <a href='#method.set_output_directory' class='fnname'>set_output_directory</a>&lt;'a&gt;(&amp;mut self, path: &amp;'a <a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.str.html'>str</a>) -&gt; &amp;mut Self</code></h4>
<div class='docblock'><p>Override the output directoy.</p>

<p>As a default, we use <code>%OUT_DIR%</code> set by cargo, but it can be necessary to override the
the setting.</p>
</div><h4 id='method.compile' class='method'><code>fn <a href='#method.compile' class='fnname'>compile</a>(&amp;self) -&gt; <a class='type' href='https://doc.rust-lang.org/nightly/std/io/error/type.Result.html' title='std::io::error::Result'>Result</a>&lt;<a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.tuple.html'>()</a>&gt;</code></h4>
<div class='docblock'><p>Run the resource compiler</p>

<p>This function generates a resource file from the settings, or
uses an existing resource file and passes it to the resource compiler
of your toolkit.</p>

<p>Further more we will print the correct statements for
<code>cargo:rustc-link-lib=</code> and <code>cargo:rustc-link-search</code> on the console,
so that the cargo build script can link the compiled resource file.</p>
</div></div></section>
    <section id='search' class="content hidden"></section>

    <section class="footer"></section>

    <aside id="help" class="hidden">
        <div>
            <h1 class="hidden">Help</h1>

            <div class="shortcuts">
                <h2>Keyboard Shortcuts</h2>

                <dl>
                    <dt>?</dt>
                    <dd>Show this help dialog</dd>
                    <dt>S</dt>
                    <dd>Focus the search field</dd>
                    <dt>&larrb;</dt>
                    <dd>Move up in search results</dd>
                    <dt>&rarrb;</dt>
                    <dd>Move down in search results</dd>
                    <dt>&#9166;</dt>
                    <dd>Go to active search result</dd>
                    <dt>+</dt>
                    <dd>Collapse/expand all sections</dd>
                </dl>
            </div>

            <div class="infos">
                <h2>Search Tricks</h2>

                <p>
                    Prefix searches with a type followed by a colon (e.g.
                    <code>fn:</code>) to restrict the search to a given type.
                </p>

                <p>
                    Accepted types are: <code>fn</code>, <code>mod</code>,
                    <code>struct</code>, <code>enum</code>,
                    <code>trait</code>, <code>type</code>, <code>macro</code>,
                    and <code>const</code>.
                </p>

                <p>
                    Search functions by type signature (e.g.
                    <code>vec -> usize</code> or <code>* -> vec</code>)
                </p>
            </div>
        </div>
    </aside>

    

    <script>
        window.rootPath = "../";
        window.currentCrate = "winres";
        window.playgroundUrl = "";
    </script>
    <script src="../jquery.js"></script>
    <script src="../main.js"></script>
    
    <script defer src="../search-index.js"></script>
</body>
</html>